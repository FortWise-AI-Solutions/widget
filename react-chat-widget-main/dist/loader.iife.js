!function(){"use strict";!function(){if(window.__chatWidgetLoaded)return;window.__chatWidgetLoaded=!0;const e=document.querySelectorAll("script[data-key]"),t=e[e.length-1];if(!t)return void console.error("Chat Widget: No script tag with data-key found");const n=t.getAttribute("data-key");if(!n)return void console.error("Chat Widget: data-key attribute is required");const o=t.src,i=o.substring(0,o.lastIndexOf("/"));let a=!1;const d=()=>{if(a)return;a=!0;const e=window.ChatWidgetConfig||{},t=e.features?.lazyLoad??!1,o=e.features?.lazyLoadDelay??1e3,d=()=>{const e=document.createElement("div");e.id="chat-widget-root",document.body.appendChild(e);const t=e.attachShadow({mode:"open"}),o=document.createElement("div");o.id="chat-widget-shadow-container",t.appendChild(o);const a=document.createElement("style");a.textContent="\n        #chat-widget-shadow-container {\n          position: fixed;\n          z-index: 2147483647;\n          bottom: 20px;\n          right: 20px;\n        }\n      ",t.insertBefore(a,o);const d=document.createElement("link");d.rel="stylesheet",d.href=`${i}/chat-widget.css`,t.insertBefore(d,o);const s=document.createElement("style");s.textContent="\n        /* Reset all styles and prevent inheritance from host page */\n        :host {\n          all: initial;\n          display: block;\n        }\n        \n        /* Ensure all elements use border-box and reset key inheritable properties */\n        *, *::before, *::after {\n          box-sizing: border-box;\n          margin: 0;\n          padding: 0;\n        }\n        \n        /* Set fixed base styles */\n        #chat-widget-shadow-container {\n          position: fixed;\n          z-index: 2147483647;\n          bottom: 20px;\n          right: 20px;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n          font-size: 16px;\n          line-height: 1.5;\n          color: #333;\n          --chat-widget-base-font-size: 16px;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n        \n        #chat-widget-root {\n          font-size: 16px;\n          --chat-widget-base-font-size: 16px;\n        }\n      ",t.insertBefore(s,o);const r=document.createElement("script");r.src=`${i}/chat-widget.iife.js`,r.async=!0,r.setAttribute("data-shadow-container",o.id),r.setAttribute("data-key",n),r.onerror=()=>{console.error("Chat Widget: Failed to load widget script")},r.onload=()=>{console.log("Chat Widget: Successfully loaded");const o=new CustomEvent("chatWidget:ready",{detail:{key:n,cdnBaseUrl:i,shadowRoot:t,container:e}});window.dispatchEvent(o)},document.head.appendChild(r)};t?setTimeout(d,o):d()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d(),window.__chatWidgetLoader={key:n,cdnBaseUrl:i,loaded:()=>a,version:"1.0.0",loadTime:Date.now()}}()}();
